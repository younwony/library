# QA는 오류를 찾지 못해야 한다

 - QA팀이 따로 있더라도, 개발팀은 QA가 잘못된 점을 찾지 못하는 상태를 목표로 삼아야 한다.

# QA는 같은 팀이다.

 - QA와 개발자는 시스템 품질향상을 위해 힘을 합쳐야 한다.
 - 팀원으로서 QA의 가장 중요한 역할은 명세서술과 특징묘사이다.

# QA의 명세 서술

 - QA의 역할은 사업부와 함께 자동화된 인수 테스트를 만드는 일이다.
   - 이런 인수 테스트는 시스템에 대한 진정한 명세서이자 요구사항 문서이다.
 - 보통 사업부는 행복한 경로(happy-path)의 테스트를 만들고 QA는 모퉁이 조건, 경계 조건, 불행한 경로(unhappy-path)의 테스트를 만든다.

# QA의 특징 묘사

 - QA의 또 다른 역할은 탐색 테스트(Exploratory testing)을 수행해 작동 중인 시스템의 실제 동작을 묘사하고 이 동작을 개발팀과 사업부에 보고하는 일이다.
 - 특징 묘사의 역할 QA는 요구사항을 변역하는 게 아니라 시스템의 실제 동작을 식별하는 역할이다.

# 테스트 자동화 피라미드

 - 프로 개발자는 단위 테스트를 만들기 위해 테스트 주도 개발원칙을 따른다.
 - 프로 개발팀은 인수 테스트로 시스템을 명세화하고 지속적 통합으로 고친 오류가 다시 생기지 않도록 한다.
 - 단위 테스트와 인수테스트 묶음은 쓸모가 많긴하지만, QA가 오류를 찾지 못하리라는 확신을 가지려면 상위 계층 테스트 또한 필요하다.

![테스트 자동화 피라미드](/img/테스트%20자동화%20피라미드.png)

# 단위 테스트

 - 피라미드의 가장 아래 계층은 단위 테스트이다.
 - 프로그래머에 의해, 프로그래머를 위해 시스템 프로그래밍 언어로 만든 테스트다.
 - 시스템의 최하위 계층을 명세하려는 의도로 만든다.
 - 개발자들은 제품 코드를 만들기 전에 만들려는 제품 코드를 명세하려고 테스트 코드를 먼저 만든다.
 - 테스트 코드는 지속적 통합의 일부로 실행되어 프로그래머가 의도한 바를 지켜낸다.
 - 테스트 커버리지는 최대한 100%에 가까워야 한다.
   - 보통 커버리지의 목표는 90~99% 사이가 돼야 한다.
   - 코드의 동작을 단언(Assert)하지 않고 넘어가는 가짜 테스트는 포함되지 않는다.

# 컴포넌트 테스트

 - 컴포넌트 테스트는 인수 테스트의 일종이다.
 - 대상은 시스템의 독립 컴포넌트이다.
 - 시스템 컴포넌트는 업무 규칙을 감싸고 있기에 컴포넌트를 대상으로 한 테스트는 해당 업무 규칙을 테스트하는 인수 테스트이다.
   - Business Rule Test
 - 테스트 대상이 아닌 다른 시스템 컴포넌트는 적절한 모의(Mock) 컴포넌트와 테스트 대역(Test-Doubling)기법으로 테스트로부터 분리한다.
 - 컴포넌트 테스트는 대략 시스템의 절반 정도를 감당한다.
 - 행복한 경로(happy-path)쪽에 치우쳐 있으며 모퉁이 조건, 경계 조건, 대체 경로는 아주 명백한 경우만 처리한다.
 - 불행한 경로(unhappy-path)는 대부분 단위 테스트로 처리하며 컴포넌트 테스트에서는 의미가 없다.
   
![컴포넌트 테스트](/img/컴포넌트%20테스트.jpeg)

# 통합 테스트

 - 통합 테스트는 여러 컴포넌트로 이루어진 큰 시스템에서만 의미가 있다.
 - 컴포넌트 묶음을 모아 묶음끼리 제대로 상호작용하는지 테스트한다.
 - 테스트 대상이 아닌 다른 시스템 컴포넌트는 적절한 모의(Mock) 컴포넌트와 테스트 대역(Test-Doubling)기법으로 테스트로부터 분리한다.
 - 안무 테스트다. 업무 규칙은 테스트하지 않고 조립한 컴포넌트 묶음끼리 얼마나 잘 어우려져 춤을 추는지 테스트 한다.
 - 배관 테스트다. 컴포넌트끼리 서로 적절히 연결되어 또렷이 소통하는지 테스트하기 때문이다.
 - 대개 시스템 아키텍트나 수석 설계자가 만든다.
 - 시스템 구조 설계가 튼튼하다는 사실을 보장한다.
 - 성능 테스트나 처리량 테스트를 하기도 하는 단계이다.
 - 대개 컴포넌트 테스트에 썻던 언어와 환경으로 마늗ㄴ다.
 - 실행이 시간이 많이 들기 때문에 보통 지속적 통합 때는 돌리지 않는다.
   - 대신 주기적으로(매일 밤, 주 단위 등) 만든 이가 필요할 때마다 테스트를 돌린다.

![통합 테스트](/img/통합%20테스트.png)

# 시스템 테스트

 - 시스템 테스트는 통합한 시스템 전체를 대상으로 하는 자동화 테스트다.
 - 궁극적인 통합 테스트다.
 - 직접적으로 업무 규칙을 테스트하지 않는다.
 - 시스템이 올바르게 연결됐고 각 부분이 계획에 따라 상호작용하는지 테스트 한다.
 - 보통 성능이나 처리량 테스트는 이 단계에서 한다.
 - 시스템 아키텍트나 기술 책임자가 만든다.
 - 대개 UI 통합 테스트에서 썻던 언어와 환경으로 만든다.
 - 실행 속도에 비해 비교적 자주 돌리는 편이지만 자주 돌리면 더 좋다.
 - 시스템 테스트는 대략 시스템의 10%를 감당한다. 시스템이 올바로 동작하는지 보다 시스템을 올바르게 빌드했는지를 확실히 하려는 목적이기 때문이다.
 - 기반 소스코드와 컴포넌트가 제대로 동작하는지는 피라미드의 하위 계층에서 이미 확인했다.

# 수동 탐색 테스트

 - 수동 탐색 테스트는 키보드에 손을 얹고 모니터를 직접 보며 하는 테스트이다.
 - 자동화된 테스트가 아니며 스크립트로 작성된 테스트도 아니다.
 - 목적은 시스템이 기대한 대로 동작하는지 확인하는 동시에 예상치 못한 오류를 찾아내는 것이다.
 - 목표 달성에는 인간의 두뇌와 창의력으로 시스템을 검사하고 탐색하는 과정이 필요하다.
 - 테스트 계획을 문서로 만드는 행동은 이런 테스트의 목표에 어긋난다.
 - 목표는 커버리지가 아니다. 모든 업무 규칙과 실행 겨로를 빠짐없이 검사할 생각은 없다. 사용자의 조작에 시스템이 잘 동작하느닞 확인하고 가능한 많은 '특이사항'을 창의적으로 발견해 내는 일이 목표다.

# 결론

 - TDD는 강력한 원칙이며 인수 테스트는 요구사항을 표현하고 강화하는 가치있는 방법이다.
   - 하지만 이는 전체 테스트 전ㄴ략의 일부분일 뿐이다.
   - 'QA는 오류를 찾지 못해야 한다'는 목표를 달성하기 위해서는 개발팀과 QA가 팀을 이뤄 단위,컴포넌트,통합,시스템,탐색 테스트 계층을 만들어야 한다.
   - 모든 테스트를 가능한 자주 실행해 최대한 많은 피드백을 얻고 시스템이 무결점 상태를 계속 유지하는지 확인해야 한다.
