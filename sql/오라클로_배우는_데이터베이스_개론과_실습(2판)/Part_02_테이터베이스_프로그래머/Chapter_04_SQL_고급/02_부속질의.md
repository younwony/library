# 부속질의 (Subquery)
 - 부속질의는 SQL문 안에 SQL 문이 중첩된 질의를 말한다.
 - 보통 조인과 대비되어 많이 사용하게 된다.
    - 일반 적으로 데이터가 대량일 경우 : 부속질의가 성능이 더 좋다.

 - 종류

|명칭|위치|영문 및 동의어|설명|
|---|---|---|---|
|중첩질의| WHERE 절| nested subquery, predicate subquery| WHERE 절에 술어와 같이 사용되며 결과를 한정시키기 위해 사용된다. 상관 혹은 비상관 형태이다.|
|스칼라 부속질의|SELECT 절|scalar subquery| SELECT 절에서 사용되며 단일 값을 반환하기 때문에 스칼라 부속질의라고 한다.|
|인라인 뷰| FROM 절| inline view, table subquery| FROM 절에서 결과를 뷰(view) 형태로 반환하기 때문에 인라인 뷰라고 한다.|

 - 부속질의가 주 질의의 값을 참조하는가에 따라 상관 부속질의와 비상관 부속질의로 분류할 수 있다.
   - 상관 부속질의 : 주 질의의 특정 열 값을 부속질의가 상속받아 부속질의의 질의에 사용하는 형태
   - 비상관 부속질의(일반 부속질의) : 독립된 질의를 수행해서 결과값을 가져오는 형태
 - 부속질의가 단일 행을 반환하느냐 혹은 다중 행을 반환하느냐에 따라 분류할 수 있다.
   - 단일 행 부속질의 : 부속질의의 결과 하나의 행을 반환하여 주 질의에 전달한다. 비교 연산자의 수행이나 스칼라 부속질의 등에서 나타난다.
   - 다중 행 부속질의 : 부속질의의 결과 여러 개의 행을 반환한다. IN 연산자를 사용하여 여러 행을 처리한다.

---

# 중첩질의 - WHERE 부속질의

 - 중첩질의는 WHERE 절에서 사용되는 부속질의를 말한다.
 - 중첩질의 연산자의 종류
 
|술어|연산자|반환 행|반환 열|상관|
|---|---|---|---|---|
|비교|=, >, <, >=, <=, <>|단일|단일|가능|
|집합|IN, NOT IN|다중|다중|가능|
|한정|ALL,SOME(ANY)|다중|단일|가능|
|존재|EXISTS, NOT EXISTS|다중|다중|필수|
---
# ALL, SOME(ANY)

 - ALL은 모든, SOME은 어떠한(최소한 하나라도)이라는 의미를 가진다.
 - ALL, SOME(ANY) 연산자의 구문 구조는 비교연산자를 중심으로 왼쪽에는 스칼라 값이나 열이름, 오른쪽에 부속질의 문이 위치한다.
   - ALL 이나 SOME은 부속질의의 대상범위를 지정하는 역할을 한다.
     - scalar_expression {비교연산자 ( =, <>, !=, >, >=, !>, <, <=, !<)} {ALL | SOME | ANY} (부속질의)
 - ALL의 경우 부속질의의 결과 집합 전체를 대상으로 하므로 결과 집합의 최댓값(MAX)과 비교하는 것과 같다고 볼 수 있다.
 - SOME은 부속질의 결과 집합 중 어떠한 값을 의미하므로 최솟값(MIN)과 비교하는 것과 같다고 볼 수 있다.

---

# 스칼라 부속질의 - SELECT 부속질의

 - 스칼라 부속질의는 SELECT 절에서 사용되는 부속질의로, 부속질의의 결과값을 단일 행, 단일 열의 스칼라값으로 반환한다.
 - 만일 결과값이 다중 행이거나 다중 열이라면 DBMS는 어떠한 행, 열을 출력할지 알 수 없어 에러를 발생한다.
 - 결과값이 없는 경우 NULL 값을 출력한다.
 - 원칙적으로 스칼라값이 들어갈 수 있는 모든 곳에 사용 가능하며, 일반적으로 SELECT문과 UPDATE SET 절에 사용된다.
 - 주 질의와 부속질의와의 관계는 상관/비상관 모두 가능하다.

---

# 인라인 뷰 - FROM 부속질의

 - 인라인 뷰는 FROM 절에서 사용되는 부속질의를 말한다.
 - 기존 테이블로부터 일시적으로 만들어진 가상의 테이블을 말한다.
 - 가상의 테이블인 뷰 형태로 제공되기 때문에 상관 부속질의로 사용될 수는 없다.