# 키

![키](/img/key.PNG)

---
# 슈퍼키 (Super Key)
 - 튜플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합
 - 튜플을 유일하게 식별이 가능하면 모두 슈퍼키가 될 수 있다.
 - 모든 집합이 가능
---
# 후보키 (Candidate Key)
 - 튜플을 유일하게 식별할 수 있는 속성의 최소 집합
 - 많은 슈퍼키들 중에서 최소의 집합을 가지는 키

---
# 기본키 (Primary Key, PK)
 - 어려 후보키 중 하나를 선정하여 대표로 삼는 키
 - 후바키가 하나일 경우 후보키를 기본키로 사용하면되고 여러 개일 경우 릴레이션의 특성을 반영하여 하나를 선택한다.

---
# 대리키
 - 기본키가 보안을 필요로 하거나, 여러 개의 속성으로 구성되어 복잡하거나, 마땅한 기본키가 없을  때 일련번호 같은 가상의 속성을 만들어 기본키로 삼는다.
 - 대리키(Surrogate Key) 또는 인조키(Artificial Key)라고 한다.
 - DBMS나 관련 소프트웨어에서 임의로 생성하는 값으로 사ㅣ용자가 직관적으로 그 값의 의미를 알 수 없다.
 - ex) sequence id 같은 속성을 만들어 부여

---
# 대체키(Alternate Key)
 - 기본기로 선정되지 않은 후보키

---
# 외래키(Foreign Key, FK)
 - 다른 릴레이션의 기본키를 참조하는 속성
 - 외래키가 성립하기 위해서는 참조하고 참조되는 양쪽 릴레이션의 도메인이 서로 같아야 한다.
 - 참조되는 릴레이션의 기본키 값이 변경되면 이 기본키를 참조하는 외래키 값 역시 변경되어야 한다.(외래키 계약조건)
 - 참조되는 릴레이션의 기본키와 달리 NULL값이 포함될 수 있고 중복 값도 허용한다.
 - 참조하는 릴레이션과 참조되는 릴레이션이 꼭 다를 필요는 없다. 즉, 자기 자신의 기본키를 참조할 수 있다.
 - 외래키가 기본키의 일부가 될 수 있다.
---
 
# 무결성 제약조건

|구분|도메인|키|키|
|---|---|---|---|
|구분|도메인 무결성 제약조건|개체 무결성 제약 조건|참조 무결성 제약조건|
|제약대상|속성|튜플|속성과튜플|
|같은용어|도메인제약(Domain Constraint)|기본키 제약(Primary Key Constraint)|외래키 제약(Foreign Key Constraint)|
|해당되는 키| - | 기본키 | 외래키|
|Null 값 | 허용 | 불가 | 허용 |
|릴레이션 내 제약조건 개수 | 속성의 개수와 동일 | 1개 | 0 ~ 여러 개|
|기타 | - 튜플 삽입/수정 시 제약사항 우선확인 | - 튜플 삽입/수정 시 제약 사항 우선 확인 | - 튜플 삽입/수정 시 제약사항 우선 확인<br> - 부모 릴레이션의 튜플 수정/삭제 시 제약사항 우선확인|

- UNIQUE 제약조건(유일성 제약조건, 고유성 제약조건).
  - 속성의 모든 값이 서로 같은 값이 없어야 한다.
  - 기본키 제약과 달리 NULL값을 허용한다.
--- 
# 참조 무결성 제약조건의 옵션(부모 릴레이션에서 튜플을 삭제할 경우)

 - 예로 학과(부모) 학생(자식) 릴레이션을 대상으로한다.

|명령어|의미|예|
|----|---|---|
|RESTRICTED|자식 릴레이션에서 참조하고 있으면 부모 릴레이션의 삭제 작업을 거부함| 학과 릴레이션의 튜플 삭제 거부|
|CASCADE| 자식 릴레이션의 관련 튜플을 같이 삭제함 | 학생 릴레이션의 관련 튜플을 삭제|
|DEFAULT| 자식 릴레이션의 관련 튜플을 미리 설정해 둔 값으로 변경 | 학생 릴레이션의 학과가 다른 학과로 자동 배정|
|NULL| 자식 릴레이션의 관련 튜플을 NULL로 설정함(NULL 값을 허용한 경우) | 학생 릴레이션의 학과가 NULL 값으로 변경|

